(()=>{var e={};e.id=789,e.ids=[789],e.modules={44:(e,t,s)=>{"use strict";s.d(t,{Av:()=>r,Ro:()=>m,W8:()=>l,d0:()=>i,d3:()=>n,fJ:()=>c,pZ:()=>o,ug:()=>d});var a=s(2234);async function r(e){return(0,a.n)("/api/policy-proposal-comments/",{method:"POST",body:e,auth:!0})}async function i(e){let t=new FormData;return t.append("title",e.title),t.append("body",e.body),t.append("published_by_user_id",e.published_by_user_id),t.append("status",e.status||"draft"),e.files&&e.files.forEach(e=>{t.append("files",e)}),(0,a.n)("/api/policy-proposal-with-attachments/",{method:"POST",body:t,auth:!0})}async function n(e){return(0,a.n)(`/api/policy-proposal-comments/policy-proposals/${e}/comment-count`,{method:"GET",auth:!0})}async function l(e){let t=new URLSearchParams;return e?.status&&t.append("status",e.status),e?.q&&t.append("q",e.q),e?.offset&&t.append("offset",e.offset.toString()),e?.limit&&t.append("limit",e.limit.toString()),(0,a.n)(`/api/policy-proposals/?${t}`,{method:"GET",auth:!0})}async function o(e){return(0,a.n)(`/api/policy-proposals/${e}`,{method:"GET",auth:!0})}async function c(e,t=50,s=0){return(0,a.n)(`/api/policy-proposals/${e}/comments?limit=${t}&offset=${s}`,{method:"GET",auth:!0})}async function d(e){return(0,a.n)(`/api/users/${e}`,{method:"GET",auth:!0})}async function m(e){let t=new URLSearchParams;return e.forEach(e=>t.append("user_ids",e)),(0,a.n)(`/api/users/batch?${t}`,{method:"GET",auth:!0})}},45:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(7413),r=s(972);function i(){return(0,a.jsx)(r.PolicyCommentsPage,{})}},94:(e,t,s)=>{"use strict";s.d(t,{X:()=>n});var a=s(687),r=s(3210),i=s(44);let n=({policyProposalId:e,className:t="",showIcon:s=!0})=>{let[n,l]=(0,r.useState)(0),[o,c]=(0,r.useState)(!0),[d,m]=(0,r.useState)(null);return((0,r.useEffect)(()=>{let t=async()=>{try{c(!0),m(null);let t=await (0,i.d3)(e);l(t.comment_count)}catch(e){console.error("コメント数取得エラー:",e),m("コメント数の取得に失敗しました"),l(0)}finally{c(!1)}};e&&t()},[e]),o)?(0,a.jsxs)("span",{className:`${t} inline-flex items-center text-gray-500`,children:[s&&(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"読み込み中..."]}):d?(0,a.jsxs)("span",{className:`${t} text-red-500 cursor-help`,title:d,children:[s&&(0,a.jsx)("svg",{className:"inline w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"エラー"]}):(0,a.jsxs)("span",{className:`${t} inline-flex items-center`,children:[s&&(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),n," コメント"]})}},440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(1658);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},648:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c});var a=s(5239),r=s(8088),i=s(8170),n=s.n(i),l=s(893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c={children:["",{children:["comments",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,45)),"/Users/ikedasayaka/Desktop/frontend/Agent0_front/src/app/comments/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,4431)),"/Users/ikedasayaka/Desktop/frontend/Agent0_front/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/ikedasayaka/Desktop/frontend/Agent0_front/src/app/comments/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/comments/page",pathname:"/comments",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},972:(e,t,s)=>{"use strict";s.d(t,{PolicyCommentsPage:()=>a});let a=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call PolicyCommentsPage() from the server but PolicyCommentsPage is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ikedasayaka/Desktop/frontend/Agent0_front/src/components/blocks/PolicyCommentsPage.tsx","PolicyCommentsPage")},1135:()=>{},1517:(e,t,s)=>{Promise.resolve().then(s.bind(s,6105))},2234:(e,t,s)=>{"use strict";s.d(t,{n:()=>i});var a=s(8744);let r=process.env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000";async function i(e,t={}){let{method:s="GET",body:n,headers:l={},auth:o=!1,signal:c}=t,d={...l};if(n instanceof FormData||(d["Content-Type"]="application/json"),o){let{accessToken:e,tokenType:t}=(0,a.gf)();e&&(d.Authorization=`${t||"Bearer"} ${e}`)}let m=await fetch(`${r}${e}`,{method:s,headers:d,body:n instanceof FormData?n:null!=n?JSON.stringify(n):void 0,credentials:"include",signal:c}),x=m.headers.get("content-type")?.includes("application/json")?await m.json().catch(()=>null):null;if(!m.ok)throw Error(x?.detail||x?.message||`Request failed: ${m.status}`);return x}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3088:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6346,23)),Promise.resolve().then(s.t.bind(s,7924,23)),Promise.resolve().then(s.t.bind(s,5656,23)),Promise.resolve().then(s.t.bind(s,99,23)),Promise.resolve().then(s.t.bind(s,8243,23)),Promise.resolve().then(s.t.bind(s,8827,23)),Promise.resolve().then(s.t.bind(s,2763,23)),Promise.resolve().then(s.t.bind(s,7173,23))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3360:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,6444,23)),Promise.resolve().then(s.t.bind(s,6042,23)),Promise.resolve().then(s.t.bind(s,8170,23)),Promise.resolve().then(s.t.bind(s,9477,23)),Promise.resolve().then(s.t.bind(s,9345,23)),Promise.resolve().then(s.t.bind(s,2089,23)),Promise.resolve().then(s.t.bind(s,6577,23)),Promise.resolve().then(s.t.bind(s,1307,23))},3857:()=>{},3873:e=>{"use strict";e.exports=require("path")},4253:(e,t,s)=>{Promise.resolve().then(s.bind(s,972))},4431:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c,metadata:()=>o});var a=s(7413),r=s(997),i=s.n(r),n=s(5930),l=s.n(n);s(1135);let o={title:"METI Picks - 人物プロフィールシステム",description:"経済産業省の人物データベースと専門家プロフィール管理システム"};function c({children:e}){return(0,a.jsxs)("html",{lang:"ja",children:[(0,a.jsxs)("head",{children:[(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}),(0,a.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap",rel:"stylesheet"})]}),(0,a.jsx)("body",{className:`${i().variable} ${l().variable} antialiased`,children:e})]})}},4493:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>o,ZB:()=>l,Zp:()=>i,aR:()=>n});var a=s(687);s(3210);var r=s(4780);function i({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-3 rounded-xl border py-3 shadow-sm",e),...t})}function n({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-3",e),...t})}function l({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...t})}function o({className:e,...t}){return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...t})}},4780:(e,t,s)=>{"use strict";s.d(t,{cn:()=>i});var a=s(9384),r=s(2348);function i(...e){return(0,r.QP)((0,a.$)(e))}},4900:(e,t,s)=>{"use strict";s.d(t,{Y:()=>i});var a=s(687),r=s(6189);function i(){let e=(0,r.useRouter)();return(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 z-20 p-8",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center mb-4 lg:mb-6 space-y-4 lg:space-y-0",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-8",children:[(0,a.jsx)("h1",{className:"font-['Montserrat',_sans-serif] font-semibold text-white text-[16px] lg:text-[18.654px] tracking-[2.2384px] cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{e.push("/dashboard")},children:"METI Picks"}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center space-x-4 lg:space-x-6",children:[(0,a.jsx)("div",{className:"text-white text-[12px] lg:text-[13.412px] font-bold tracking-[2.0118px] cursor-pointer hover:opacity-80 transition-opacity opacity-70 hover:border-b-2 hover:border-white hover:pb-1",onClick:()=>e.push("/search"),children:"人脈を探す"}),(0,a.jsx)("div",{className:"text-white text-[12px] lg:text-[13.412px] font-bold tracking-[2.0118px] cursor-pointer hover:opacity-80 transition-opacity opacity-70 hover:border-b-2 hover:border-white hover:pb-1",onClick:()=>e.push("/policy"),children:"政策を投稿する"}),(0,a.jsx)("div",{className:"text-white text-[12px] lg:text-[13.412px] font-bold tracking-[2.0118px] cursor-pointer hover:opacity-80 transition-opacity opacity-70 hover:border-b-2 hover:border-white hover:pb-1",onClick:()=>e.push("/comments"),children:"意見を確認する"})]})]}),(0,a.jsx)("div",{className:"text-white text-[12px] lg:text-[13.06px] font-semibold tracking-[1.5672px] bg-white/10 rounded-lg px-3 py-2 cursor-pointer hover:bg-white/20 transition-colors self-start lg:self-auto",children:"テックゼロ太郎さん"})]})})})}},6105:(e,t,s)=>{"use strict";s.d(t,{PolicyCommentsPage:()=>w});var a=s(687),r=s(3210);let i=[{id:"policy-001",title:"地方スタートアップ育成ファンドの創設",content:"地方創生の観点から、地域の特色を活かしたスタートアップ支援制度の創設を提案します。特に、地方の資源や文化を活用したビジネスモデルの開発を支援し、地域経済の活性化を図ります。",policyThemes:["地方創生","スタートアップ支援"],submittedAt:"2025年7月21日",status:"under_review",attachedFiles:["proposal_document.pdf","regional_analysis.xlsx"],commentCount:157},{id:"policy-002",title:"海外展開スタートアップ向けアクセラレータープログラム",content:"グローバル市場への進出を目指すスタートアップを支援するため、海外展開に特化したアクセラレータープログラムの創設を提案します。",policyThemes:["海外展開","スタートアップ支援"],submittedAt:"2025年7月1日",status:"approved",attachedFiles:["program_outline.pdf"],commentCount:89},{id:"policy-003",title:"中小企業のAI導入支援",content:"中小企業のデジタル化を促進するため、AI技術の導入を支援する制度の拡充を提案します。",policyThemes:["AI導入","中小企業支援"],submittedAt:"2025年5月11日",status:"submitted",attachedFiles:["ai_survey_results.pdf"],commentCount:45}];var n=s(8744);async function l(){try{let e=(0,n.gf)(),t=e.accessToken?"/api/policy-proposals/my-submissions":"/api/policy-proposals/test-submissions/ccf94a13-9ebd-46b4-a1c5-f76741b28b0b";console.log("使用するエンドポイント:",t),console.log("認証トークン:",e.accessToken?"存在":"なし");let s={"Content-Type":"application/json"};e.accessToken&&(s.Authorization=`Bearer ${e.accessToken}`),e.accessToken;let a=await fetch(t,{method:"GET",headers:s});if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);let r=await a.json();if(!r.success)throw Error(r.error||"データの取得に失敗しました");return r.data}catch(e){return console.error("政策投稿履歴取得エラー:",e),console.log("バックエンドAPIが利用できないため、サンプルデータを使用します"),i}}async function o(e,t=50,s=0){try{let a=await fetch(`/api/policy-proposals/${e}/comments?limit=${t}&offset=${s}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error(`HTTP error! status: ${a.status}`);return await a.json()}catch(e){return console.error("コメント取得エラー:",e),[]}}var c=s(4493),d=s(94),m=s(4780);function x({className:e,width:t,height:s}){return(0,a.jsx)("div",{className:(0,m.cn)("animate-pulse rounded-md bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 bg-[length:200%_100%]",e),style:{width:t||"100%",height:s||"1rem",backgroundSize:"200% 100%",animation:"shimmer 2s infinite"}})}function h(){return(0,a.jsxs)("div",{className:"bg-white p-4 mb-4 rounded-lg border border-gray-100 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(x,{className:"h-5 mb-2",width:"60%"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x,{className:"h-3",width:"40%"}),(0,a.jsx)(x,{className:"h-3 w-1"}),(0,a.jsx)(x,{className:"h-3",width:"30%"})]})]}),(0,a.jsx)(x,{className:"h-8 w-24"})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsx)(x,{className:"h-4",width:"100%"}),(0,a.jsx)(x,{className:"h-4",width:"95%"}),(0,a.jsx)(x,{className:"h-4",width:"85%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(x,{className:"h-6 w-16"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(x,{className:"h-6 w-6 rounded-full"}),(0,a.jsx)(x,{className:"h-6 w-6 rounded-full"})]})]})]})}function u({count:e=3}){return(0,a.jsx)("div",{className:"space-y-4",children:Array.from({length:e}).map((e,t)=>(0,a.jsx)(h,{},t))})}var p=s(8610),g=s(4900);let b=[{id:"all",label:"すべて"},{id:"unfb",label:"未FBのみ"},{id:"fb",label:"FB済みのみ"}],f=({activeTab:e,onChange:t,counts:s})=>(0,a.jsx)("div",{className:"flex border-b border-gray-200 mb-6",children:b.map(r=>{let i=s[r.id];return(0,a.jsxs)("button",{onClick:()=>t(r.id),className:`px-4 py-2 text-sm font-medium transition-colors ${e===r.id?"border-b-2 border-[#4AA0E9] text-[#4AA0E9]":"text-gray-500 hover:text-gray-700"}`,children:[r.label,i>0&&(0,a.jsx)("span",{className:"ml-2 bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-xs",children:i})]},r.id)})}),y=({value:e,onChange:t,label:s,description:r,leftLabel:i,rightLabel:n})=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-xs font-medium text-gray-700 min-w-[80px]",children:[s,":"]}),(0,a.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(s=>(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("button",{onClick:()=>t(s),className:`w-6 h-6 rounded border transition-all hover:scale-105 ${e>=s?"bg-[#4AA0E9] border-[#4AA0E9] text-white shadow-sm":"bg-white border-gray-300 text-gray-400 hover:border-[#4AA0E9] hover:text-[#4AA0E9]"} flex items-center justify-center text-xs font-bold`,children:s}),1===s&&i&&(0,a.jsx)("span",{className:"text-[8px] text-gray-500 mt-1 font-bold",children:i}),5===s&&n&&(0,a.jsx)("span",{className:"text-[8px] text-gray-500 mt-1 font-bold",children:n})]},s))})]}),r&&(0,a.jsx)("p",{className:"text-xs text-gray-600 leading-tight",children:r})]}),v=({commentId:e,onSubmit:t,onClose:s})=>{let[i,n]=(0,r.useState)(0),[l,o]=(0,r.useState)(0),[c,d]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1),[h,u]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1),b=async()=>{x(!0),setTimeout(()=>{d("このコメントに対して建設的なフィードバックを提供いたします。提案された内容は非常に興味深く、特に実装可能性について詳細な検討が必要です。"),x(!1)},2e3)},f=async()=>{x(!0),setTimeout(()=>{d("別の視点からのフィードバックを提供いたします。ご提案の背景と実現可能性について、さらに詳しく検討する必要があります。"),x(!1)},2e3)};return(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-base font-bold text-gray-900",children:"意見の評価・返信"}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h4",{className:"text-sm font-bold text-gray-900 mb-3",children:"内部評価（非公開）"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-start",children:[(0,a.jsx)(y,{value:i,onChange:n,label:"意見の総合評価",leftLabel:"低い",rightLabel:"高い"}),(0,a.jsx)(y,{value:l,onChange:o,label:"政策への共感度",leftLabel:"否定的",rightLabel:"肯定的"}),(0,a.jsx)("div",{className:"flex justify-end items-end h-full",children:(0,a.jsx)("button",{onClick:()=>{i>0&&l>0&&(console.log("評価保存:",{overallRating:i,empathyRating:l}),u(!0))},disabled:0===i||0===l,className:"px-3 py-1.5 bg-[#4AA0E9] text-white text-xs rounded hover:bg-[#3a8fd9] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?"• 評価保存済み":"評価のみ保存"})})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h4",{className:"text-sm font-bold text-gray-900",children:"フィードバック返信（公開）"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:b,disabled:m,className:"px-3 py-1.5 border border-[#4AA0E9] text-[#4AA0E9] text-xs rounded hover:bg-[#4AA0E9]/10 transition-colors disabled:opacity-50",children:m?"生成中...":"AIフィードバックを生成"}),c&&(0,a.jsx)("button",{onClick:f,disabled:m,className:"px-3 py-1 bg-gray-500 text-white text-xs rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50",children:m?"生成中...":"再生成"})]})]}),(0,a.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),placeholder:"AIによって生成されたフィードバックが表示されます。編集してから投稿してください。",className:"w-full h-24 p-3 border border-[#4AA0E9]/30 rounded-lg resize-none text-sm focus:outline-none focus:ring-2 focus:ring-[#4AA0E9]/20"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{onClick:s,className:"px-2 py-1 text-gray-600 hover:text-gray-800 transition-colors text-xs",children:"キャンセル"}),(0,a.jsx)("button",{onClick:()=>{i>0&&l>0&&c.trim()&&t({commentId:e,overallRating:i,empathyRating:l,aiResponse:c})},disabled:0===i||0===l||!c.trim(),className:"px-2 py-1 bg-[#4AA0E9] text-white text-xs rounded hover:bg-[#3a8fd9] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"投稿"})]})]})},j=({policy:e,onViewComments:t,isSelected:s=!1})=>(0,a.jsxs)("div",{className:`p-4 cursor-pointer transition-all ${s?"bg-[#4AA0E9]/10 border-l-4 border-[#4AA0E9]":"hover:bg-gray-50"}`,onClick:()=>t(e.id),children:[(0,a.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,a.jsx)("h3",{className:`text-sm font-medium ${s?"text-[#4AA0E9]":"text-gray-700"} line-clamp-2`,children:e.title})}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:e.submittedAt}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-2 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["コメント: ",(0,a.jsx)(d.X,{policyProposalId:e.id,className:"text-gray-500",showIcon:!1})]}),e.attachedFiles&&e.attachedFiles.length>0&&(0,a.jsxs)("span",{children:["添付ファイル: ",e.attachedFiles.length,"件"]})]})]}),N=({comment:e,onFeedbackSubmit:t,isFeedbackSubmitted:s=!1})=>{let[i,n]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"bg-white p-4 mb-4 relative rounded-lg border border-gray-100 shadow-sm hover:shadow-md transition-all duration-300 hover:scale-[1.02] hover:border-gray-200",children:[s&&(0,a.jsx)("div",{className:"absolute top-3 right-3",children:(0,a.jsx)("span",{className:"inline-flex items-center justify-center rounded-md bg-[#4AA0E9] text-white text-xs px-2 py-0.5 font-medium",children:"• 評価保存済み"})}),(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold text-base text-gray-900 leading-tight mb-1",children:e.author_name}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 leading-tight",children:e.author_type}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"•"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 leading-tight",children:new Date(e.posted_at).toLocaleDateString("ja-JP")})]})]}),!s&&(0,a.jsx)("button",{onClick:()=>n(!0),className:"px-3 py-1 bg-[#4AA0E9] text-white text-xs rounded hover:bg-[#3a8fd9] transition-colors",children:"フィードバックを追加"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mb-4 leading-relaxed",children:e.comment_text}),i&&(0,a.jsx)("div",{className:"mt-4 border-t border-gray-200 pt-4",children:(0,a.jsx)(v,{commentId:e.id,onSubmit:e=>{t(e),n(!1)},onClose:()=>n(!1)})})]})},w=()=>{let[e,t]=(0,r.useState)(""),[s,i]=(0,r.useState)([]),[n,d]=(0,r.useState)(!0),[m,x]=(0,r.useState)(null),[h,b]=(0,r.useState)("all"),[y,v]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{(async()=>{try{d(!0);let s=await l();i(s),s.length>0&&!e&&t(s[0].id)}catch(e){console.error("政策投稿履歴取得エラー:",e),x(e instanceof Error?e.message:"データの取得に失敗しました")}finally{d(!1)}})()},[]);let w=e=>{t(e)},k=e=>{console.log("フィードバック送信:",e),v(t=>new Set(t).add(e.commentId))},[A,P]=(0,r.useState)([]),[C,E]=(0,r.useState)(!1),_=s.find(t=>t.id===e);(0,r.useEffect)(()=>{e&&(async()=>{E(!0),P([]);try{await new Promise(e=>setTimeout(e,300));let t=await o(e);P(t)}catch(e){console.error("コメント取得エラー:",e),P([])}finally{E(!1)}})()},[e]);let T=A.filter(e=>{let t=y.has(e.id);switch(h){case"unfb":return!t;case"fb":return t;default:return!0}}),S={all:A.length,unfb:A.filter(e=>!y.has(e.id)).length,fb:A.filter(e=>y.has(e.id)).length};return(0,a.jsxs)("div",{className:"relative min-h-screen w-full overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-[#7bc8e8] via-[#58aadb] to-[#2d8cd9]"}),(0,a.jsx)("div",{className:"absolute inset-0 opacity-20 pointer-events-none",style:{backgroundImage:`url("data:image/svg+xml,${encodeURIComponent(`
          <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
            <filter id="noiseFilter">
              <feTurbulence type="fractalNoise" baseFrequency="1.5" numOctaves="4" stitchTiles="stitch"/>
            </filter>
            <rect width="100%" height="100%" filter="url(#noiseFilter)"/>
          </svg>
        `)}")`}}),(0,a.jsx)(p.default,{scale:.8}),(0,a.jsx)(g.Y,{}),(0,a.jsx)("div",{className:"relative z-10 flex-1 px-6 lg:px-12 pb-6 pt-32",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-1 gap-4 lg:gap-8",children:[(0,a.jsx)("div",{className:"xl:col-span-1 lg:col-span-1 order-2 lg:order-1",children:(0,a.jsx)("div",{className:"lg:sticky lg:top-8",children:(0,a.jsxs)(c.Zp,{className:"p-4 lg:p-6 bg-white border-0",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[(0,a.jsx)("h2",{className:"text-sm lg:text-base font-bold text-gray-400 tracking-[2px]",children:"投稿履歴一覧"}),(0,a.jsxs)("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"flex items-center space-x-1 text-[#4AA0E9] text-xs hover:text-[#3a8fd9] transition-colors",children:[(0,a.jsx)("span",{children:"↑"}),(0,a.jsx)("span",{children:"TOPに戻る"})]})]}),n?(0,a.jsx)("div",{className:"animate-fade-in-up",children:(0,a.jsx)("div",{className:"space-y-4",children:Array.from({length:3}).map((e,t)=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-100 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"h-5 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded mb-2 animate-pulse-slow",style:{width:"60%"}}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"h-3 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse-slow",style:{width:"40%"}}),(0,a.jsx)("div",{className:"h-3 w-1 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse-slow"}),(0,a.jsx)("div",{className:"h-3 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse-slow",style:{width:"30%"}})]})]}),(0,a.jsx)("div",{className:"h-8 w-24 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse-slow"})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse-slow"}),(0,a.jsx)("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse-slow",style:{width:"95%"}}),(0,a.jsx)("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse-slow",style:{width:"85%"}})]})]},t))})}):m?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-red-500",children:m}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-2 px-3 py-1 bg-[#4AA0E9] text-white text-xs rounded hover:bg-[#3a8fd9] transition-colors",children:"再試行"})]}):0===s.length?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"投稿履歴がありません"})}):(0,a.jsx)("div",{className:"space-y-2",children:s.map(t=>(0,a.jsx)(j,{policy:t,onViewComments:w,isSelected:t.id===e},t.id))})]})})}),(0,a.jsx)("div",{className:"xl:col-span-3 lg:col-span-2 order-1 lg:order-2",children:(0,a.jsx)(c.Zp,{className:"p-6 bg-white border-0",children:n?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"読み込み中..."})}):m?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-red-500",children:m})}):_?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-[#4AA0E9] mb-3 leading-tight",children:_.title}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-6",children:[(0,a.jsx)("span",{className:"font-medium",children:"中小企業庁 産業事業支援課"}),(0,a.jsx)("span",{className:"text-gray-400",children:"•"}),(0,a.jsx)("span",{children:_.submittedAt})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"概要"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed",children:_.content})]})]}),(0,a.jsx)(f,{activeTab:h,onChange:b,counts:S}),(0,a.jsx)("div",{className:"space-y-2",children:C?(0,a.jsx)("div",{className:"animate-fade-in-up",children:(0,a.jsx)(u,{count:3})}):T.length>0?(0,a.jsx)("div",{className:"space-y-4",children:T.map((e,t)=>(0,a.jsx)("div",{className:"animate-fade-in-up",style:{animationDelay:`${.1*t}s`},children:(0,a.jsx)(N,{comment:e,onFeedbackSubmit:k,isFeedbackSubmitted:y.has(e.id)})},e.id))}):(0,a.jsx)("div",{className:"text-center py-12 animate-fade-in-up",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"all"===h?"まだコメントがありません":"unfb"===h?"未対応のコメントはありません":"対応済みのコメントはありません"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"all"===h?"この政策に対するコメントがまだ投稿されていません。":"unfb"===h?"すべてのコメントが対応済みです。":"まだ対応していないコメントはありません。"})]})]})})})]}):(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"政策を選択してください"})})})})]})})})]})}},6189:(e,t,s)=>{"use strict";var a=s(5773);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},7009:()=>{},8610:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var a=s(687),r=s(3210);function i({scale:e=1,vwRatio:t=.9,maxWidthPx:s=1100}){let[i,n]=(0,r.useState)({width:0,height:0,top1:0,top2:0,top3:0}),l={left:"50%",transform:"translateX(-50%)",width:i.width,height:i.height,borderRadius:706.9231};return(0,a.jsxs)("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0",children:[(0,a.jsx)("div",{className:"absolute",style:{...l,top:i.top1,background:"linear-gradient(90deg, rgba(135,196,247,0.4) 0%, rgba(160,199,217,0) 79%)"}}),(0,a.jsx)("div",{className:"absolute",style:{...l,top:i.top2,background:"linear-gradient(270deg, rgba(143,184,234,0.4) 0%, rgba(160,199,217,0) 78%)"}}),(0,a.jsx)("div",{className:"absolute",style:{...l,top:i.top3,background:"linear-gradient(90deg, rgba(142,184,216,0.3) 0%, rgba(160,199,217,0) 79%)"}})]})}},8744:(e,t,s)=>{"use strict";s.d(t,{f7:()=>a,gf:()=>r});function a(e,t="bearer"){}function r(){return{accessToken:null,tokenType:null}}},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[447,468,658,69],()=>s(648));module.exports=a})();