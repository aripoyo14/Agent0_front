(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[340],{255:(e,t,r)=>{"use strict";function n(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return n}}),r(5155),r(7650),r(5744),r(589)},2146:(e,t,r)=>{"use strict";function n(e){let{reason:t,children:r}=e;return r}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}}),r(5262)},2390:(e,t,r)=>{"use strict";r.d(t,{Y:()=>a});var n=r(5155),l=r(5695);function a(){let e=(0,l.useRouter)();return(0,n.jsx)("div",{className:"absolute top-0 left-0 right-0 z-20 p-8",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center mb-4 lg:mb-6 space-y-4 lg:space-y-0",children:[(0,n.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-8",children:[(0,n.jsx)("h1",{className:"font-['Montserrat',_sans-serif] font-semibold text-white text-[16px] lg:text-[18.654px] tracking-[2.2384px] cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{e.push("/dashboard")},children:"METI Picks"}),(0,n.jsxs)("div",{className:"flex flex-wrap items-center space-x-4 lg:space-x-6",children:[(0,n.jsx)("div",{className:"text-white text-[12px] lg:text-[13.412px] font-bold tracking-[2.0118px] cursor-pointer hover:opacity-80 transition-opacity opacity-70 hover:border-b-2 hover:border-white hover:pb-1",onClick:()=>e.push("/search"),children:"人脈を探す"}),(0,n.jsx)("div",{className:"text-white text-[12px] lg:text-[13.412px] font-bold tracking-[2.0118px] cursor-pointer hover:opacity-80 transition-opacity opacity-70 hover:border-b-2 hover:border-white hover:pb-1",onClick:()=>e.push("/policy"),children:"政策を投稿する"}),(0,n.jsx)("div",{className:"text-white text-[12px] lg:text-[13.412px] font-bold tracking-[2.0118px] cursor-pointer hover:opacity-80 transition-opacity opacity-70 hover:border-b-2 hover:border-white hover:pb-1",onClick:()=>e.push("/comments"),children:"意見を確認する"})]})]}),(0,n.jsx)("div",{className:"text-white text-[12px] lg:text-[13.06px] font-semibold tracking-[1.5672px] bg-white/10 rounded-lg px-3 py-2 cursor-pointer hover:bg-white/20 transition-colors self-start lg:self-auto",children:"テックゼロ太郎さん"})]})})})}},2531:(e,t,r)=>{"use strict";r.d(t,{SearchPage:()=>f});var n=r(5155),l=r(2115),a=r(9434);function i(e){let{themes:t,selectedThemes:r,onThemeToggle:l,className:i}=e;return(0,n.jsxs)("div",{className:(0,a.cn)("space-y-2",i),children:[(0,n.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"政策テーマを選択"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map(e=>{let t=r.includes(e.id);return(0,n.jsx)("div",{className:(0,a.cn)("px-3 py-2 rounded-full text-xs font-medium transition-all cursor-pointer text-center flex items-center justify-center min-h-[24px] inline-flex whitespace-nowrap",t?"bg-[#58aadb] text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>l(e.id),children:e.title},e.id)})}),r.length>0&&(0,n.jsx)("button",{onClick:()=>r.forEach(e=>l(e)),className:"w-full py-2 text-xs text-gray-600 hover:text-gray-800 transition-colors mt-3 font-medium",children:"すべてクリア"})]})}var o=r(5695);let s=(0,r(5028).default)(()=>r.e(748).then(r.bind(r,9748)),{loadableGenerated:{webpack:()=>[9748]},ssr:!1});function c(e){let{filters:t,className:r,backendData:a}=e,i=(0,o.useRouter)(),c=(0,l.useRef)(null),d=(0,l.useMemo)(()=>{if(!a)return null;let e=[],t=[],r=new Set;for(let t of a.policy_themes){let l="policy:".concat(t.id);if(!r.has(l)){var n;e.push({id:l,name:null!=(n=t.title)?n:String(t.id),group:0,connections:[],relevanceScore:1,color:"#f59e0b"}),r.add(l)}}let l=new Map(a.experts.map(e=>[e.id,e]));for(let n of a.relations){let a="policy:".concat(n.policy_id);r.has(a)||(e.push({id:a,name:String(n.policy_id),group:0,connections:[],relevanceScore:1,color:"#f59e0b"}),r.add(a));let i=l.get(n.expert_id);i&&!r.has(i.id)&&(e.push({id:i.id,name:i.name,company:i.department,position:i.title,group:1,connections:[],relevanceScore:n.relation_score,color:"#58aadb"}),r.add(i.id)),t.push({source:a,target:n.expert_id,value:n.relation_score})}return{nodes:e,links:t}},[a]),u=(0,l.useMemo)(()=>d||{nodes:[],links:[]},[d]);return(l.useEffect(()=>{let e=setTimeout(()=>{if(c.current)try{c.current.zoomToFit(400,40)}catch(e){}},100);return()=>clearTimeout(e)},[u]),l.useEffect(()=>{if(c.current)try{var e,t,r,n,l,a;let i=null==(e=(t=c.current).d3Force)?void 0:e.call(t,"link");i&&"function"==typeof i.distance&&i.distance(e=>{var t,r,n,l,a,i;let o=String(null!=(l=null!=(n=null==(t=e.source)?void 0:t.id)?n:e.source)?l:""),s=String(null!=(i=null!=(a=null==(r=e.target)?void 0:r.id)?a:e.target)?i:""),c=o.startsWith("policy:")||s.startsWith("policy:"),d="number"==typeof e.value?e.value:.4;return c?140+(1-d)*60:90});let o=null==(r=(n=c.current).d3Force)?void 0:r.call(n,"charge");o&&"function"==typeof o.strength&&o.strength(e=>{var t;return String(null!=(t=e.id)?t:"").startsWith("policy:")?-420:-140}),null==(l=(a=c.current).d3ReheatSimulation)||l.call(a)}catch(e){}},[u]),d&&0!==d.nodes.length)?(0,n.jsxs)("div",{className:"h-full w-full relative overflow-hidden ".concat(r),children:[(0,n.jsx)(s,{ref:c,graphData:u,nodeRelSize:6,nodeLabel:e=>{if((e.id||"").startsWith("policy:"))return"政策テーマ: ".concat(e.name);let t="number"==typeof e.relevanceScore?e.relevanceScore:0,r=[e.company||"",e.position||""].filter(Boolean).join(" / "),n="関連度: ".concat(t.toFixed(2));return"".concat(e.name).concat(r?"\n"+r:"","\n").concat(n)},nodeCanvasObject:(e,t,r)=>{var n,l,a,i,o,s,c,d,u,p,f;let h=String(e.id||"").startsWith("policy:"),m=h?1:null!=(n=e.relevanceScore)?n:.5,x=(h?6:4)+6*m,b=t.createRadialGradient(null!=(l=e.x)?l:0,null!=(a=e.y)?a:0,Math.max(.5,.2*x),null!=(i=e.x)?i:0,null!=(o=e.y)?o:0,x),g=.8+.2*m,y=.8+.2*m;h?(b.addColorStop(0,"rgba(251, 191, 36, ".concat(g,")")),b.addColorStop(1,"rgba(245, 158, 11, ".concat(y,")"))):(b.addColorStop(0,"rgba(180, 217, 214, ".concat(g,")")),b.addColorStop(1,"rgba(88, 170, 219, ".concat(y,")"))),t.save(),t.shadowColor="rgba(88, 170, 219, ".concat(.2+.2*m,")"),t.shadowBlur=6,t.beginPath(),t.arc(null!=(s=e.x)?s:0,null!=(c=e.y)?c:0,x,0,2*Math.PI,!1),t.fillStyle=b,t.fill(),t.restore(),t.beginPath(),t.arc(null!=(d=e.x)?d:0,null!=(u=e.y)?u:0,x,0,2*Math.PI,!1),t.strokeStyle="rgba(255,255,255,0.95)",t.lineWidth=h?2:1.5,t.stroke();let v=e.name,j=Math.max(7,(h?10:9)/r+m*(h?6:5));t.font="".concat(j,"px sans-serif"),t.textAlign="center",t.textBaseline="top",t.fillStyle=h?"rgba(120,53,15,0.95)":"rgba(55,65,81,0.9)",t.fillText(v,null!=(p=e.x)?p:0,(null!=(f=e.y)?f:0)+x+4)},linkColor:e=>{let t=.2+Math.min(.8,.8*("number"==typeof e.value?e.value:.4));return"rgba(88,170,219,".concat(t.toFixed(3),")")},linkDirectionalParticles:0,linkWidth:e=>.5+3*("number"==typeof e.value?e.value:.4),enableZoomInteraction:!0,enablePanInteraction:!0,cooldownTime:2e3,onNodeClick:e=>{let t=e.id;null!=t&&t.startsWith("policy:")||i.push("/profile/".concat(t))},backgroundColor:"rgba(255,255,255,1)",onRenderFramePre:e=>{let{width:t,height:r}=e.canvas;e.save(),e.clearRect(0,0,t,r),e.fillStyle="white",e.fillRect(0,0,t,r),e.restore()}}),(0,n.jsx)("div",{className:"absolute bottom-3 left-3 bg-white/90 backdrop-blur-sm p-3 rounded-lg shadow-lg border border-white/50 text-[10px]",children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("div",{className:"w-3 h-3 bg-gradient-to-br from-[#b4d9d6] to-[#58aadb] rounded-full shadow-sm"}),(0,n.jsx)("span",{className:"text-gray-700 font-medium",children:"クリックでプロフィール表示 / ドラッグで移動 / ホイールでズーム"})]})})]}):(0,n.jsx)("div",{className:"h-full flex items-center justify-center ".concat(r),children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full mx-auto mb-4 flex items-center justify-center",children:(0,n.jsx)("span",{className:"material-symbols-outlined text-gray-500 text-2xl",children:"group"})}),(0,n.jsx)("p",{className:"text-gray-500 text-lg mb-2 font-bold",children:"人脈マップ"}),(0,n.jsx)("p",{className:"text-gray-400 text-sm font-bold",children:"検索を実行して結果を表示します"})]})})}let d=[{id:"economy-industry",title:"経済産業",description:"",color:"#0ea5e9",participants:0},{id:"external-economy",title:"対外経済",description:"",color:"#10b981",participants:0},{id:"manufacturing-it-distribution-services",title:"ものづくり／情報／流通・サービス",description:"",color:"#f59e0b",participants:0},{id:"sme-regional-economy",title:"中小企業・地域経済産業",description:"",color:"#8b5cf6",participants:0},{id:"energy-environment",title:"エネルギー・環境",description:"",color:"#16a34a",participants:0},{id:"safety-security",title:"安全・安心",description:"",color:"#ef4444",participants:0},{id:"digital-transformation",title:"DX",description:"",color:"#007aff",participants:0},{id:"green-growth",title:"GX",description:"",color:"#059669",participants:0},{id:"startup-support",title:"スタートアップ支援",description:"",color:"#34c759",participants:0},{id:"diversity-management",title:"ダイバーシティ経営",description:"",color:"#ec4899",participants:0},{id:"economic-security",title:"経済安全保障",description:"",color:"#1d4ed8",participants:0},{id:"regional-co-creation",title:"地域共創",description:"",color:"#f97316",participants:0},{id:"femtech",title:"フェムテック",description:"",color:"#a855f7",participants:0},{id:"data-ai-utilization",title:"データ・AI活用",description:"",color:"#0369a1",participants:0},{id:"cashless",title:"キャッシュレス",description:"",color:"#14b8a6",participants:0}];var u=r(2390),p=r(7358);function f(){let[e,t]=(0,l.useState)({searchQuery:"",policyThemes:[],industries:[],positions:[]}),[r,a]=(0,l.useState)(null),o=p.env.NEXT_PUBLIC_API_BASE_URL||"http://127.0.0.1:8000",s="".concat(o.replace(/\/$/,""),"/api/search_network_map/match"),f=(e,r)=>{t(t=>({...t,[e]:r}))},h=async()=>{let t={policy_tag:d.filter(t=>e.policyThemes.includes(t.id)).map(e=>e.title),free_text:e.searchQuery};try{let e=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let t=await e.text();console.warn("network_map/match error:",e.status,t);return}let r=await e.json();console.log("network_map response:",r),a(r)}catch(e){console.warn("network_map/match request failed:",e)}};return(0,n.jsxs)("div",{className:"h-screen w-full relative flex flex-col overflow-hidden",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-[#7bc8e8] via-[#58aadb] to-[#2d8cd9]"}),(0,n.jsx)("div",{className:"absolute inset-0 opacity-20 pointer-events-none",style:{backgroundImage:'url("data:image/svg+xml,'.concat(encodeURIComponent('\n          <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">\n            <filter id="noiseFilter">\n              <feTurbulence type="fractalNoise" baseFrequency="1.5" numOctaves="4" stitchTiles="stitch"/>\n            </filter>\n            <rect width="100%" height="100%" filter="url(#noiseFilter)"/>\n          </svg>\n        '),'")')}}),(0,n.jsx)(u.Y,{}),(0,n.jsx)("div",{className:"relative z-10 flex-1 px-6 lg:px-12 pb-6 pt-32",children:(0,n.jsxs)("div",{className:"flex gap-4 h-full",children:[(0,n.jsxs)("div",{className:"w-1/4 relative",children:[(0,n.jsx)("h3",{className:"absolute -top-6 left-0 font-['Noto_Sans_JP'] font-medium text-white text-xs tracking-[0.5px] drop-shadow-md",children:"絞り込む"}),(0,n.jsxs)("div",{className:"bg-white rounded-lg p-3 h-full overflow-y-auto flex flex-col",children:[(0,n.jsx)("div",{className:"mb-5",children:(0,n.jsx)(i,{themes:d,selectedThemes:e.policyThemes,onThemeToggle:e=>{t(t=>({...t,policyThemes:t.policyThemes.includes(e)?t.policyThemes.filter(t=>t!==e):[...t.policyThemes,e]}))}})}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"フリーワード検索"}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("div",{className:"absolute left-0 top-0 flex items-start pl-3 pt-3",children:(0,n.jsx)("span",{className:"material-symbols-outlined text-gray-400",style:{fontSize:"18px"},children:"search"})}),(0,n.jsx)("textarea",{value:e.searchQuery,onChange:e=>f("searchQuery",e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&h(),placeholder:"キーワードを入力してください",className:"w-full h-32 pl-10 pr-3 py-3 bg-gray-100 rounded border border-gray-200 text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#58aadb] focus:border-transparent transition-colors resize-none"})]}),(0,n.jsx)("button",{type:"button",onClick:h,className:"mt-3 inline-flex items-center justify-center px-4 py-2 bg-[#58aadb] text-white rounded text-sm font-medium hover:opacity-90 transition-opacity",children:"検索"})]})]})]}),(0,n.jsxs)("div",{className:"w-3/4 relative",children:[(0,n.jsx)("h3",{className:"absolute -top-6 left-0 font-['Noto_Sans_JP'] font-medium text-white text-xs tracking-[0.5px] drop-shadow-md",children:"人脈マップ"}),(0,n.jsx)("div",{className:"bg-white rounded-lg p-2 h-full",children:(0,n.jsx)("div",{className:"w-full h-full",children:(0,n.jsx)(c,{filters:e,backendData:r})})})]})]})})]})}},2875:(e,t,r)=>{Promise.resolve().then(r.bind(r,2531))},4054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{bindSnapshot:function(){return i},createAsyncLocalStorage:function(){return a},createSnapshot:function(){return o}});let r=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class n{disable(){throw r}getStore(){}run(){throw r}exit(){throw r}enterWith(){throw r}static bind(e){return e}}let l="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function a(){return l?new l:new n}function i(e){return l?l.bind(e):n.bind(e)}function o(){return l?l.snapshot():function(e,...t){return e(...t)}}},5028:(e,t,r)=>{"use strict";r.d(t,{default:()=>l.a});var n=r(6645),l=r.n(n)},5695:(e,t,r)=>{"use strict";var n=r(8999);r.o(n,"useParams")&&r.d(t,{useParams:function(){return n.useParams}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},5744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return n.workAsyncStorageInstance}});let n=r(7828)},6645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let n=r(8229)._(r(7357));function l(e,t){var r;let l={};"function"==typeof e&&(l.loader=e);let a={...l,...t};return(0,n.default)({...a,modules:null==(r=a.loadableGenerated)?void 0:r.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7357:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s}});let n=r(5155),l=r(2115),a=r(2146);function i(e){return{default:e&&"default"in e?e.default:e}}r(255);let o={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},s=function(e){let t={...o,...e},r=(0,l.lazy)(()=>t.loader().then(i)),s=t.loading;function c(e){let i=s?(0,n.jsx)(s,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,c=o?l.Suspense:l.Fragment,d=t.ssr?(0,n.jsxs)(n.Fragment,{children:[null,(0,n.jsx)(r,{...e})]}):(0,n.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,n.jsx)(r,{...e})});return(0,n.jsx)(c,{...o?{fallback:i}:{},children:d})}return c.displayName="LoadableComponent",c}},7828:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return n}});let n=(0,r(4054).createAsyncLocalStorage)()},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>a});var n=r(2596),l=r(9688);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.QP)((0,n.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[277,441,684,358],()=>t(2875)),_N_E=e.O()}]);