(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[789],{180:(e,t,s)=>{"use strict";s.d(t,{PolicyCommentsPage:()=>w});var a=s(5155),r=s(2115);let l=[{id:"policy-001",title:"地方スタートアップ育成ファンドの創設",content:"地方創生の観点から、地域の特色を活かしたスタートアップ支援制度の創設を提案します。特に、地方の資源や文化を活用したビジネスモデルの開発を支援し、地域経済の活性化を図ります。",policyThemes:["地方創生","スタートアップ支援"],submittedAt:"2025年7月21日",status:"under_review",attachedFiles:["proposal_document.pdf","regional_analysis.xlsx"],commentCount:157},{id:"policy-002",title:"海外展開スタートアップ向けアクセラレータープログラム",content:"グローバル市場への進出を目指すスタートアップを支援するため、海外展開に特化したアクセラレータープログラムの創設を提案します。",policyThemes:["海外展開","スタートアップ支援"],submittedAt:"2025年7月1日",status:"approved",attachedFiles:["program_outline.pdf"],commentCount:89},{id:"policy-003",title:"中小企業のAI導入支援",content:"中小企業のデジタル化を促進するため、AI技術の導入を支援する制度の拡充を提案します。",policyThemes:["AI導入","中小企業支援"],submittedAt:"2025年5月11日",status:"submitted",attachedFiles:["ai_survey_results.pdf"],commentCount:45}];var n=s(514);async function i(){try{let e=(0,n.gf)(),t=e.accessToken?"/api/policy-proposals/my-submissions":"/api/policy-proposals/test-submissions/".concat("ccf94a13-9ebd-46b4-a1c5-f76741b28b0b");console.log("使用するエンドポイント:",t),console.log("認証トークン:",e.accessToken?"存在":"なし");let s={"Content-Type":"application/json"};e.accessToken&&(s.Authorization="Bearer ".concat(e.accessToken)),e.accessToken;let a=await fetch(t,{method:"GET",headers:s});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));let r=await a.json();if(!r.success)throw Error(r.error||"データの取得に失敗しました");return r.data}catch(e){return console.error("政策投稿履歴取得エラー:",e),console.log("バックエンドAPIが利用できないため、サンプルデータを使用します"),l}}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{let a=await fetch("/api/policy-proposals/".concat(e,"/comments?limit=").concat(t,"&offset=").concat(s),{method:"GET",headers:{"Content-Type":"application/json"}});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));return await a.json()}catch(e){return console.error("コメント取得エラー:",e),[]}}var c=s(6695),d=s(6678),x=s(9434);function m(e){let{className:t,width:s,height:r}=e;return(0,a.jsx)("div",{className:(0,x.cn)("animate-pulse rounded-md bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 bg-[length:200%_100%]",t),style:{width:s||"100%",height:r||"1rem",backgroundSize:"200% 100%",animation:"shimmer 2s infinite"}})}function h(){return(0,a.jsxs)("div",{className:"bg-white p-4 mb-4 rounded-lg border border-gray-100 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)(m,{className:"h-5 mb-2",width:"60%"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m,{className:"h-3",width:"40%"}),(0,a.jsx)(m,{className:"h-3 w-1"}),(0,a.jsx)(m,{className:"h-3",width:"30%"})]})]}),(0,a.jsx)(m,{className:"h-8 w-24"})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsx)(m,{className:"h-4",width:"100%"}),(0,a.jsx)(m,{className:"h-4",width:"95%"}),(0,a.jsx)(m,{className:"h-4",width:"85%"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(m,{className:"h-6 w-16"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(m,{className:"h-6 w-6 rounded-full"}),(0,a.jsx)(m,{className:"h-6 w-6 rounded-full"})]})]})]})}function u(e){let{count:t=3}=e;return(0,a.jsx)("div",{className:"space-y-4",children:Array.from({length:t}).map((e,t)=>(0,a.jsx)(h,{},t))})}var p=s(3704),g=s(2390);let b=[{id:"all",label:"すべて"},{id:"unfb",label:"未FBのみ"},{id:"fb",label:"FB済みのみ"}],f=e=>{let{activeTab:t,onChange:s,counts:r}=e;return(0,a.jsx)("div",{className:"flex border-b border-gray-200 mb-6",children:b.map(e=>{let l=r[e.id];return(0,a.jsxs)("button",{onClick:()=>s(e.id),className:"px-4 py-2 text-sm font-medium transition-colors ".concat(t===e.id?"border-b-2 border-[#4AA0E9] text-[#4AA0E9]":"text-gray-500 hover:text-gray-700"),children:[e.label,l>0&&(0,a.jsx)("span",{className:"ml-2 bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-xs",children:l})]},e.id)})})},y=e=>{let{value:t,onChange:s,label:r,description:l,leftLabel:n,rightLabel:i}=e;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-xs font-medium text-gray-700 min-w-[80px]",children:[r,":"]}),(0,a.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("button",{onClick:()=>s(e),className:"w-6 h-6 rounded border transition-all hover:scale-105 ".concat(t>=e?"bg-[#4AA0E9] border-[#4AA0E9] text-white shadow-sm":"bg-white border-gray-300 text-gray-400 hover:border-[#4AA0E9] hover:text-[#4AA0E9]"," flex items-center justify-center text-xs font-bold"),children:e}),1===e&&n&&(0,a.jsx)("span",{className:"text-[8px] text-gray-500 mt-1 font-bold",children:n}),5===e&&i&&(0,a.jsx)("span",{className:"text-[8px] text-gray-500 mt-1 font-bold",children:i})]},e))})]}),l&&(0,a.jsx)("p",{className:"text-xs text-gray-600 leading-tight",children:l})]})},v=e=>{let{commentId:t,onSubmit:s,onClose:l}=e,[n,i]=(0,r.useState)(0),[o,c]=(0,r.useState)(0),[d,x]=(0,r.useState)(""),[m,h]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!1),f=async()=>{h(!0),setTimeout(()=>{x("このコメントに対して建設的なフィードバックを提供いたします。提案された内容は非常に興味深く、特に実装可能性について詳細な検討が必要です。"),h(!1)},2e3)},v=async()=>{h(!0),setTimeout(()=>{x("別の視点からのフィードバックを提供いたします。ご提案の背景と実現可能性について、さらに詳しく検討する必要があります。"),h(!1)},2e3)};return(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-base font-bold text-gray-900",children:"意見の評価・返信"}),(0,a.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h4",{className:"text-sm font-bold text-gray-900 mb-3",children:"内部評価（非公開）"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-start",children:[(0,a.jsx)(y,{value:n,onChange:i,label:"意見の総合評価",leftLabel:"低い",rightLabel:"高い"}),(0,a.jsx)(y,{value:o,onChange:c,label:"政策への共感度",leftLabel:"否定的",rightLabel:"肯定的"}),(0,a.jsx)("div",{className:"flex justify-end items-end h-full",children:(0,a.jsx)("button",{onClick:()=>{n>0&&o>0&&(console.log("評価保存:",{overallRating:n,empathyRating:o}),p(!0))},disabled:0===n||0===o,className:"px-3 py-1.5 bg-[#4AA0E9] text-white text-xs rounded hover:bg-[#3a8fd9] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u?"• 評価保存済み":"評価のみ保存"})})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h4",{className:"text-sm font-bold text-gray-900",children:"フィードバック返信（公開）"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:f,disabled:m,className:"px-3 py-1.5 border border-[#4AA0E9] text-[#4AA0E9] text-xs rounded hover:bg-[#4AA0E9]/10 transition-colors disabled:opacity-50",children:m?"生成中...":"AIフィードバックを生成"}),d&&(0,a.jsx)("button",{onClick:v,disabled:m,className:"px-3 py-1 bg-gray-500 text-white text-xs rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50",children:m?"生成中...":"再生成"})]})]}),(0,a.jsx)("textarea",{value:d,onChange:e=>x(e.target.value),placeholder:"AIによって生成されたフィードバックが表示されます。編集してから投稿してください。",className:"w-full h-24 p-3 border border-[#4AA0E9]/30 rounded-lg resize-none text-sm focus:outline-none focus:ring-2 focus:ring-[#4AA0E9]/20"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)("button",{onClick:l,className:"px-2 py-1 text-gray-600 hover:text-gray-800 transition-colors text-xs",children:"キャンセル"}),(0,a.jsx)("button",{onClick:()=>{n>0&&o>0&&d.trim()&&s({commentId:t,overallRating:n,empathyRating:o,aiResponse:d})},disabled:0===n||0===o||!d.trim(),className:"px-2 py-1 bg-[#4AA0E9] text-white text-xs rounded hover:bg-[#3a8fd9] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"投稿"})]})]})},j=e=>{let{policy:t,onViewComments:s,isSelected:r=!1}=e;return(0,a.jsxs)("div",{className:"p-4 cursor-pointer transition-all ".concat(r?"bg-[#4AA0E9]/10 border-l-4 border-[#4AA0E9]":"hover:bg-gray-50"),onClick:()=>s(t.id),children:[(0,a.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,a.jsx)("h3",{className:"text-sm font-medium ".concat(r?"text-[#4AA0E9]":"text-gray-700"," line-clamp-2"),children:t.title})}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:t.submittedAt}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-2 text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["コメント: ",(0,a.jsx)(d.X,{policyProposalId:t.id,className:"text-gray-500",showIcon:!1})]}),t.attachedFiles&&t.attachedFiles.length>0&&(0,a.jsxs)("span",{children:["添付ファイル: ",t.attachedFiles.length,"件"]})]})]})},N=e=>{let{comment:t,onFeedbackSubmit:s,isFeedbackSubmitted:l=!1}=e,[n,i]=(0,r.useState)(!1);return(0,a.jsxs)("div",{className:"bg-white p-4 mb-4 relative rounded-lg border border-gray-100 shadow-sm hover:shadow-md transition-all duration-300 hover:scale-[1.02] hover:border-gray-200",children:[l&&(0,a.jsx)("div",{className:"absolute top-3 right-3",children:(0,a.jsx)("span",{className:"inline-flex items-center justify-center rounded-md bg-[#4AA0E9] text-white text-xs px-2 py-0.5 font-medium",children:"• 評価保存済み"})}),(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-bold text-base text-gray-900 leading-tight mb-1",children:t.author_name}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500 leading-tight",children:t.author_type}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"•"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 leading-tight",children:new Date(t.posted_at).toLocaleDateString("ja-JP")})]})]}),!l&&(0,a.jsx)("button",{onClick:()=>i(!0),className:"px-3 py-1 bg-[#4AA0E9] text-white text-xs rounded hover:bg-[#3a8fd9] transition-colors",children:"フィードバックを追加"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-700 mb-4 leading-relaxed",children:t.comment_text}),n&&(0,a.jsx)("div",{className:"mt-4 border-t border-gray-200 pt-4",children:(0,a.jsx)(v,{commentId:t.id,onSubmit:e=>{s(e),i(!1)},onClose:()=>i(!1)})})]})},w=()=>{let[e,t]=(0,r.useState)(""),[s,l]=(0,r.useState)([]),[n,d]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null),[h,b]=(0,r.useState)("all"),[y,v]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{(async()=>{try{d(!0);let s=await i();l(s),s.length>0&&!e&&t(s[0].id)}catch(e){console.error("政策投稿履歴取得エラー:",e),m(e instanceof Error?e.message:"データの取得に失敗しました")}finally{d(!1)}})()},[]);let w=e=>{t(e)},k=e=>{console.log("フィードバック送信:",e),v(t=>new Set(t).add(e.commentId))},[A,E]=(0,r.useState)([]),[C,S]=(0,r.useState)(!1),T=s.find(t=>t.id===e);(0,r.useEffect)(()=>{e&&(async()=>{S(!0),E([]);try{await new Promise(e=>setTimeout(e,300));let t=await o(e);E(t)}catch(e){console.error("コメント取得エラー:",e),E([])}finally{S(!1)}})()},[e]);let _=A.filter(e=>{let t=y.has(e.id);switch(h){case"unfb":return!t;case"fb":return t;default:return!0}}),L={all:A.length,unfb:A.filter(e=>!y.has(e.id)).length,fb:A.filter(e=>y.has(e.id)).length};return(0,a.jsxs)("div",{className:"relative min-h-screen w-full overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-[#7bc8e8] via-[#58aadb] to-[#2d8cd9]"}),(0,a.jsx)("div",{className:"absolute inset-0 opacity-20 pointer-events-none",style:{backgroundImage:'url("data:image/svg+xml,'.concat(encodeURIComponent('\n          <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">\n            <filter id="noiseFilter">\n              <feTurbulence type="fractalNoise" baseFrequency="1.5" numOctaves="4" stitchTiles="stitch"/>\n            </filter>\n            <rect width="100%" height="100%" filter="url(#noiseFilter)"/>\n          </svg>\n        '),'")')}}),(0,a.jsx)(p.default,{scale:.8}),(0,a.jsx)(g.Y,{}),(0,a.jsx)("div",{className:"relative z-10 flex-1 px-6 lg:px-12 pb-6 pt-32",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-1 gap-4 lg:gap-8",children:[(0,a.jsx)("div",{className:"xl:col-span-1 lg:col-span-1 order-2 lg:order-1",children:(0,a.jsx)("div",{className:"lg:sticky lg:top-8",children:(0,a.jsxs)(c.Zp,{className:"p-4 lg:p-6 bg-white border-0",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[(0,a.jsx)("h2",{className:"text-sm lg:text-base font-bold text-gray-400 tracking-[2px]",children:"投稿履歴一覧"}),(0,a.jsxs)("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"flex items-center space-x-1 text-[#4AA0E9] text-xs hover:text-[#3a8fd9] transition-colors",children:[(0,a.jsx)("span",{children:"↑"}),(0,a.jsx)("span",{children:"TOPに戻る"})]})]}),n?(0,a.jsx)("div",{className:"animate-fade-in-up",children:(0,a.jsx)("div",{className:"space-y-4",children:Array.from({length:3}).map((e,t)=>(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-100 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"h-5 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded mb-2 animate-pulse-slow",style:{width:"60%"}}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"h-3 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse-slow",style:{width:"40%"}}),(0,a.jsx)("div",{className:"h-3 w-1 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse-slow"}),(0,a.jsx)("div",{className:"h-3 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse-slow",style:{width:"30%"}})]})]}),(0,a.jsx)("div",{className:"h-8 w-24 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse-slow"})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse-slow"}),(0,a.jsx)("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse-slow",style:{width:"95%"}}),(0,a.jsx)("div",{className:"h-4 bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 rounded animate-pulse-slow",style:{width:"85%"}})]})]},t))})}):x?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("p",{className:"text-red-500",children:x}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-2 px-3 py-1 bg-[#4AA0E9] text-white text-xs rounded hover:bg-[#3a8fd9] transition-colors",children:"再試行"})]}):0===s.length?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"投稿履歴がありません"})}):(0,a.jsx)("div",{className:"space-y-2",children:s.map(t=>(0,a.jsx)(j,{policy:t,onViewComments:w,isSelected:t.id===e},t.id))})]})})}),(0,a.jsx)("div",{className:"xl:col-span-3 lg:col-span-2 order-1 lg:order-2",children:(0,a.jsx)(c.Zp,{className:"p-6 bg-white border-0",children:n?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"読み込み中..."})}):x?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-red-500",children:x})}):T?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-[#4AA0E9] mb-3 leading-tight",children:T.title}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600 mb-6",children:[(0,a.jsx)("span",{className:"font-medium",children:"中小企業庁 産業事業支援課"}),(0,a.jsx)("span",{className:"text-gray-400",children:"•"}),(0,a.jsx)("span",{children:T.submittedAt})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"概要"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed",children:T.content})]})]}),(0,a.jsx)(f,{activeTab:h,onChange:b,counts:L}),(0,a.jsx)("div",{className:"space-y-2",children:C?(0,a.jsx)("div",{className:"animate-fade-in-up",children:(0,a.jsx)(u,{count:3})}):_.length>0?(0,a.jsx)("div",{className:"space-y-4",children:_.map((e,t)=>(0,a.jsx)("div",{className:"animate-fade-in-up",style:{animationDelay:"".concat(.1*t,"s")},children:(0,a.jsx)(N,{comment:e,onFeedbackSubmit:k,isFeedbackSubmitted:y.has(e.id)})},e.id))}):(0,a.jsx)("div",{className:"text-center py-12 animate-fade-in-up",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"all"===h?"まだコメントがありません":"unfb"===h?"未対応のコメントはありません":"対応済みのコメントはありません"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm",children:"all"===h?"この政策に対するコメントがまだ投稿されていません。":"unfb"===h?"すべてのコメントが対応済みです。":"まだ対応していないコメントはありません。"})]})]})})})]}):(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"政策を選択してください"})})})})]})})})]})}},514:(e,t,s)=>{"use strict";s.d(t,{f7:()=>n,gf:()=>i});let a="access_token",r="token_type";function l(){return"undefined"!=typeof localStorage}function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bearer";l()&&(localStorage.setItem(a,e),localStorage.setItem(r,t))}function i(){return l()?{accessToken:localStorage.getItem(a),tokenType:localStorage.getItem(r)}:{accessToken:null,tokenType:null}}},2390:(e,t,s)=>{"use strict";s.d(t,{Y:()=>l});var a=s(5155),r=s(5695);function l(){let e=(0,r.useRouter)();return(0,a.jsx)("div",{className:"absolute top-0 left-0 right-0 z-20 p-8",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center mb-4 lg:mb-6 space-y-4 lg:space-y-0",children:[(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-8",children:[(0,a.jsx)("h1",{className:"font-['Montserrat',_sans-serif] font-semibold text-white text-[16px] lg:text-[18.654px] tracking-[2.2384px] cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{e.push("/dashboard")},children:"METI Picks"}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center space-x-4 lg:space-x-6",children:[(0,a.jsx)("div",{className:"text-white text-[12px] lg:text-[13.412px] font-bold tracking-[2.0118px] cursor-pointer hover:opacity-80 transition-opacity opacity-70 hover:border-b-2 hover:border-white hover:pb-1",onClick:()=>e.push("/search"),children:"人脈を探す"}),(0,a.jsx)("div",{className:"text-white text-[12px] lg:text-[13.412px] font-bold tracking-[2.0118px] cursor-pointer hover:opacity-80 transition-opacity opacity-70 hover:border-b-2 hover:border-white hover:pb-1",onClick:()=>e.push("/policy"),children:"政策を投稿する"}),(0,a.jsx)("div",{className:"text-white text-[12px] lg:text-[13.412px] font-bold tracking-[2.0118px] cursor-pointer hover:opacity-80 transition-opacity opacity-70 hover:border-b-2 hover:border-white hover:pb-1",onClick:()=>e.push("/comments"),children:"意見を確認する"})]})]}),(0,a.jsx)("div",{className:"text-white text-[12px] lg:text-[13.06px] font-semibold tracking-[1.5672px] bg-white/10 rounded-lg px-3 py-2 cursor-pointer hover:bg-white/20 transition-colors self-start lg:self-auto",children:"テックゼロ太郎さん"})]})})})}},2956:(e,t,s)=>{"use strict";s.d(t,{n:()=>l});var a=s(514);let r=s(7358).env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000";async function l(e){var t;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:l="GET",body:n,headers:i={},auth:o=!1,signal:c}=s,d={...i};if(n instanceof FormData||(d["Content-Type"]="application/json"),o){let{accessToken:e,tokenType:t}=(0,a.gf)();e&&(d.Authorization="".concat(t||"Bearer"," ").concat(e))}let x=await fetch("".concat(r).concat(e),{method:l,headers:d,body:n instanceof FormData?n:null!=n?JSON.stringify(n):void 0,credentials:"include",signal:c}),m=(null==(t=x.headers.get("content-type"))?void 0:t.includes("application/json"))?await x.json().catch(()=>null):null;if(!x.ok)throw Error((null==m?void 0:m.detail)||(null==m?void 0:m.message)||"Request failed: ".concat(x.status));return m}},3704:(e,t,s)=>{"use strict";s.d(t,{default:()=>l});var a=s(5155),r=s(2115);function l(e){let{scale:t=1,vwRatio:s=.9,maxWidthPx:l=1100}=e,[n,i]=(0,r.useState)({width:0,height:0,top1:0,top2:0,top3:0});(0,r.useEffect)(()=>{let e=()=>{let e=window.innerWidth,a=window.innerHeight,r=Math.min(e*s,l)*t,n=.35917765074963215*r,o=Math.max(0,a-n);i({width:r,height:n,top1:0,top2:0+n,top3:o})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[l,t,s]);let o={left:"50%",transform:"translateX(-50%)",width:n.width,height:n.height,borderRadius:706.9231};return(0,a.jsxs)("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0",children:[(0,a.jsx)("div",{className:"absolute",style:{...o,top:n.top1,background:"linear-gradient(90deg, rgba(135,196,247,0.4) 0%, rgba(160,199,217,0) 79%)"}}),(0,a.jsx)("div",{className:"absolute",style:{...o,top:n.top2,background:"linear-gradient(270deg, rgba(143,184,234,0.4) 0%, rgba(160,199,217,0) 78%)"}}),(0,a.jsx)("div",{className:"absolute",style:{...o,top:n.top3,background:"linear-gradient(90deg, rgba(142,184,216,0.3) 0%, rgba(160,199,217,0) 79%)"}})]})}},4704:(e,t,s)=>{"use strict";s.d(t,{Av:()=>r,Ro:()=>x,W8:()=>i,d0:()=>l,d3:()=>n,fJ:()=>c,pZ:()=>o,ug:()=>d});var a=s(2956);async function r(e){return(0,a.n)("/api/policy-proposal-comments/",{method:"POST",body:e,auth:!0})}async function l(e){let t=new FormData;return t.append("title",e.title),t.append("body",e.body),t.append("published_by_user_id",e.published_by_user_id),t.append("status",e.status||"draft"),e.files&&e.files.forEach(e=>{t.append("files",e)}),(0,a.n)("/api/policy-proposal-with-attachments/",{method:"POST",body:t,auth:!0})}async function n(e){return(0,a.n)("/api/policy-proposal-comments/policy-proposals/".concat(e,"/comment-count"),{method:"GET",auth:!0})}async function i(e){let t=new URLSearchParams;return(null==e?void 0:e.status)&&t.append("status",e.status),(null==e?void 0:e.q)&&t.append("q",e.q),(null==e?void 0:e.offset)&&t.append("offset",e.offset.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(0,a.n)("/api/policy-proposals/?".concat(t),{method:"GET",auth:!0})}async function o(e){return(0,a.n)("/api/policy-proposals/".concat(e),{method:"GET",auth:!0})}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(0,a.n)("/api/policy-proposals/".concat(e,"/comments?limit=").concat(t,"&offset=").concat(s),{method:"GET",auth:!0})}async function d(e){return(0,a.n)("/api/users/".concat(e),{method:"GET",auth:!0})}async function x(e){let t=new URLSearchParams;return e.forEach(e=>t.append("user_ids",e)),(0,a.n)("/api/users/batch?".concat(t),{method:"GET",auth:!0})}},5695:(e,t,s)=>{"use strict";var a=s(8999);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},6678:(e,t,s)=>{"use strict";s.d(t,{X:()=>n});var a=s(5155),r=s(2115),l=s(4704);let n=e=>{let{policyProposalId:t,className:s="",showIcon:n=!0}=e,[i,o]=(0,r.useState)(0),[c,d]=(0,r.useState)(!0),[x,m]=(0,r.useState)(null);return((0,r.useEffect)(()=>{let e=async()=>{try{d(!0),m(null);let e=await (0,l.d3)(t);o(e.comment_count)}catch(e){console.error("コメント数取得エラー:",e),m("コメント数の取得に失敗しました"),o(0)}finally{d(!1)}};t&&e()},[t]),c)?(0,a.jsxs)("span",{className:"".concat(s," inline-flex items-center text-gray-500"),children:[n&&(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"読み込み中..."]}):x?(0,a.jsxs)("span",{className:"".concat(s," text-red-500 cursor-help"),title:x,children:[n&&(0,a.jsx)("svg",{className:"inline w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"エラー"]}):(0,a.jsxs)("span",{className:"".concat(s," inline-flex items-center"),children:[n&&(0,a.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),i," コメント"]})}},6695:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>o,ZB:()=>i,Zp:()=>l,aR:()=>n});var a=s(5155);s(2115);var r=s(9434);function l(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-3 rounded-xl border py-3 shadow-sm",t),...s})}function n(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-3",t),...s})}function i(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...s})}function o(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...s})}},8987:(e,t,s)=>{Promise.resolve().then(s.bind(s,180))},9434:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(2596),r=s(9688);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[277,441,684,358],()=>t(8987)),_N_E=e.O()}]);